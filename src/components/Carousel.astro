---
import Layout from "@/layouts/Layout.astro";
import Par1 from "@/pics/main/image_1.webp";
import Par2 from "@/pics/main/image_2.webp";
import Par3 from "@/pics/main/image_3.webp";
import Image from "astro/components/Image.astro";
---
<Layout>
    <!-- Astro Component -->
    <div class="relative w-full max-w-lg mx-auto overflow-hidden">
      <!-- Slides -->
      <div class="relative flex w-full h-32 ">
        <div class="carousel-slide absolute inset-0 opacity-100 transition-opacity duration-500">
          <Image src={Par1} alt="Slide 1" class="w-full h-full object-contain" />
        </div>
        <div class="carousel-slide absolute inset-0 opacity-0 transition-opacity duration-500">
          <Image src={Par2} alt="Slide 2" class="w-full h-full object-contain" />
        </div>
        <div class="carousel-slide absolute inset-0 opacity-0 transition-opacity duration-500">
          <Image src={Par3} alt="Slide 3" class="w-full h-full object-contain" />
        </div>
      </div>
    
      <!-- Navigation Buttons -->
      <button id="prevBtn" class="absolute left-2 top-1/2 transform -translate-y-1/2 text-gray text-4xl font-thin px-3 py-1">‹</button>
      <button id="nextBtn" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-gray text-4xl font-thin px-3 py-1">›</button>
    </div>
    
    <!-- TypeScript-Safe JavaScript -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let currentIndex = 0;
        const slides = document.querySelectorAll(".carousel-slide");
        const totalSlides = slides.length;
        const nextBtn = document.querySelector("#nextBtn");
        const prevBtn = document.querySelector("#prevBtn");
        let autoSlideInterval: ReturnType<typeof setInterval>;
    
        function showSlide(index: number) {
          slides.forEach((slide, i) => {
            slide.classList.toggle("opacity-100", i === index);
            slide.classList.toggle("opacity-0", i !== index);
          });
        }
    
        function nextSlide() {
          currentIndex = (currentIndex + 1) % totalSlides;
          showSlide(currentIndex);
        }
    
        function prevSlide() {
          currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
          showSlide(currentIndex);
        }
    
        function startAutoSlide() {
          autoSlideInterval = setInterval(nextSlide, 5000);
        }
    
        function stopAutoSlide() {
          clearInterval(autoSlideInterval);
        }
    
        nextBtn?.addEventListener("click", () => {
          nextSlide();
          stopAutoSlide();
          startAutoSlide();
        });
    
        prevBtn?.addEventListener("click", () => {
          prevSlide();
          stopAutoSlide();
          startAutoSlide();
        });
    
        showSlide(currentIndex);
        startAutoSlide();
      });
    </script>    
</Layout>
